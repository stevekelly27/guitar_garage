{% extends 'base.html' %}
{% block content %}
{% load crispy_forms_tags %}


<div class="card">
    <div class="card-body">
        <h5 class="card-title">{{ post.title }}</h5>
        <p class="card-text">{{ post.content }}</p>
        <div>
            <img class="card-img-bottom" src="..." alt="Card image cap">
        </div>
        <p class="card-text"><small class="text-muted">{{post.author}}</small></p>
        <p class="card-text"><small class="text-muted">{{post.created_on}}</small></p>
        <p class="card-text"><small class="text-muted">{{ updated_on }}</small></p>
    </div>
</div>

{% if request.user.is_staff %}
<div class="text-center mt-3">
    <a class="btn btn-primary" href="{% url 'edit_post' post.id %}">Edit</a>
</div>
<div class="text-center mt-3"> 
    <a class="btn btn-danger" href="{% url 'delete_confirmation' post.id %}">Delete</a>
</div>       
{% endif %}

<div class="text-center mt-5">Please leave your comments/suggestions below!</div>
<div class="card-body">
{% for comment in comments %}
    <div class="comments" style="padding: 10px;">
        <p class="font-weight-bold">
        {{ comment.name }}
        <span class=" text-muted font-weight-normal">
         <!-- The comment's created date goes here -->
        {{ comment.created_on }}
        </span> wrote:
        </p>
        <!-- The body of the comment goes before the | -->
        {{ comment.body | linebreaks }}
    </div>
        <!-- Our for loop ends here -->
        {% endfor %}
</div>

{% if user.is_authenticated %}
<form method="post" style="margin-top: 1.3em;">
    <div class="form-group text-center">
        {{ comment_form | crispy }}
        {% csrf_token %}
    </div>
    <div class="form-group text-center">
        <button type="submit" class="btn btn-signup btn-lg btn-success">Submit</button>
    </div>    
</form>
{% endif %}

{% endblock content %}